
\section{Design}
\label{sec:design}

\subsection{External factor collection}
\label{subsec:external}
Sensing module is mainly designed for collected the external factors of users.

\paragraph{Food intake}
As the food intake is a main source of carbohydrate, \sysname provides the food menu for users to record their daily intakes based on the carbohydrate food list \cite{bib:carblist}.
Five common food categories have been provided by \sysname, including grains ,vegetables, mike and egg,fruits and meats. The users are asked to enter their food items and the corresponding amounts. \sysname calculate the carbohydrate of a meal and measure its impact on blood glucose level.

\paragraph{Drug intake}
The oral diabetes medications enhance secretion of insulin into the blood by the pancreas or decrease amount of glucose released from liver, keeping the blood glucose in a low level for type II diabetes.
In \sysname, a drug menu of 11 oral diabetes is report for users to input their drug intake. After eating the diabetes drugs, users select their pills name and report the drug dosage. The drug list is provided based on \cite{bib:druglist}.
\sysname transfers the drug dose as the blood glucose efforts according to their work functions \cite{bib:druglist, bib:bolen2007systematic, bib:bennett2011oral}  by physiological model.

\paragraph{Insulin injection}
Insulin injection is to control blood glucose concentration of those who have type I diabetes, and the patients of type II, whose blood sugar is too high for their bodies to control. \sysname provides a insulin type list based on \cite{bib:insulinlist} for user with diabetes to enter their usage and insulin dosage, and then transfer it into physiological model to compute the blood glucose level.

\paragraph{Activity factors}
Since the carbohydrate in the body can be consumed by daily exercise, resulting to varying the blood glucose level, \sysname adopts an effective and power efficient approach \cite{bib:kwapisz2011activity} to automatically recognize six common user's daily activities (i.e., walking, running, upstairs, downstairs, sitting and standing), and record the corresponding durations. The caloric expenditure can be easily consumed by the calorie burn calculator formulas as Equation ~\ref{calorie_burn}.
\begin{equation}\label{calorie_burn}
  Calorie Burn = (BMR/24)*MET*T,
\end{equation}
where BMR (Basal Methobolic Rate) is the amount of energy required to simply sit or lie quietly \cite{bib:mcnab1997utility}, and MET (Metabolic Equivalent) is the ratio of the work metabolic rate to the resting metabolic rate\cite{bib:ainsworth2000compendium}. The calculator formula has been widely used by multiple sport applications \cite{bib:shapesense, bib:HealthStatus, bib:CalorieCounter}.
\sysname finally leverages the calories to measure the effects of exercise on the blood glucose.

\paragraph{Sleep quality}
Sleep quality has a long influence on blood glucose level. To measure the sleep quality of users, \sysname applies an effective method in \cite{bib:gu2014intelligent} to measure the sleep quality, and leverages the sleep quality score as an index to evaluate the sleeping impact on blood glucose level.

\subsection{Feature Engineering of Physiological-Temporal Views }
\subsubsection{Physiological View}
The feature engineering of physiological view is to leverage a physiological model to quantify the dynamics of physiological factors in the body. The physiological model has been widely studied in previous works \cite{bib:briegel2002nonlinear,bib:duke2010intelligent, bib:plis2014machine}.It primarily measures the real-time values of carbohydrate, insulin and glucose influenced by the external factors. We constructed our physiological model based on the work \cite{bib:duke2010intelligent}, 
with an extension of sleep factor.  

\paragraph{Temporal Graph of Physiological Model}
Assuming the state vectors $X(t)={C_{g1}(t), C_{g2}(t), I_{s}(t),I_{m}(t), I_{t}, G_{m}(t), G(t)}$. 
The mean of each element in the vector is illustrated in Table~\ref{} 
The temporal graph of physiological model in Fig.~\ref{} represents a state transition from $X(t)$ to $X(t+1)$. 

1) Positive factors:
Positive factors indicates the  

However, the parameters of this model are different to individuals and also hard to be tuned.

\subsection{Blood glucose level prediction}

\input{rnnWriting}
